# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 6642 (tg_id: 937011437):
- **Regular hookahs**: 134
- **Free hookahs**: 33
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: 100%
- **Expected progress**: 134 √ó 20 = 2680% ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–æ –¥–æ 100%

### –ü–æ—á–µ–º—É —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. –£–¥–∞–ª—è–µ—Ç—Å—è 1 –∫–∞–ª—å—è–Ω ‚Üí progress —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 80%
2. –ê–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–∏–¥–∏—Ç 134 –∫–∞–ª—å—è–Ω–∞ ‚Üí –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ 100%
3. –í–æ–∑–≤—Ä–∞—Ç –∫ 100%

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ N –º–µ—Å—è—Ü–µ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `hookah_history_archive`.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏
–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6-10 –ø–ª–∞—Ç–Ω—ã—Ö –∫–∞–ª—å—è–Ω–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (1-2 —Ü–∏–∫–ª–∞).

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–¥—Å—á–µ—Ç–∞ progress
- Progress = (regular_count % 5) * 20
- completed_cycles = Math.floor(regular_count / 5)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∞—Ä–∏–∞–Ω—Ç 3 + —á–∞—Å—Ç–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

1. **–ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
   ```typescript
   const regularCount = history.filter(h => h.hookah_type === 'regular').length
   const currentCycle = regularCount % 5  // 0-4
   const progress = currentCycle * 20      // 0, 20, 40, 60, 80
   const completedCycles = Math.floor(regularCount / 5)
   ```

2. **–ù–µ —Ç—Ä–æ–≥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é** ‚Äî –æ–Ω–∞ –Ω—É–∂–Ω–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

3. **–£–±—Ä–∞—Ç—å –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—é** –∏–∑ add/remove API ‚Äî –ø—É—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î.

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 3.

